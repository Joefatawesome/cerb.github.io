---
layout: post
title:  "In Development: 9.0"
excerpt: Cerb 9.0 is a generational major feature update in development during June 2018 with 58 improvements from community feedback.
author: The Cerb Team
date: 2018-06-07 00:00:00 -0700
permalink: /releases/9.0/
social_image_url: /assets/images/releases/9.0/9.0.png
redirect_from:
  - /9.0/
  - /wiki/9.0/
tags: cerb announcements releases
release:
  type: generational major feature update
  count: 58
---

<div class="cerb-screenshot">
<img src="{{page.social_image_url}}" class="screenshot">
</div>

**Cerb (9.0)** is a **{{ page.release.type }}** in development as of June 7, 2018.  It includes more than **{{ page.release.count }}** new features and improvements from community feedback.

* TOC
{:toc}

<div class="cerb-box note">
	<p>
		To check if you qualify for this release as a free update, view <b>Setup &raquo; Configure &raquo; License</b>. If your software updates expire on or after <b>June 30, 2018</b> then you can upgrade without renewing your license.  Cerb Cloud subscribers will be upgraded automatically.
	</p>
</div>

{% comment %}
# Introduction
...

Thanks for supporting Cerb!

- Jeff Standen, Software Architect, Cerb
{% endcomment %}

# Important Release Notes
{:.no_toc}

* [**Always make a backup before upgrading!**](/docs/backups)

* **Cerb 9.0** requires **PHP 7.0+** and **MySQL 5.6+**.

* To upgrade your installation, [follow these instructions](/docs/upgrading).

# Release Notes

* **[Worklists/Search]** Improved placeholders in worklist quick search queries. Previously these were inconsistent between the UI, API, and bots. [[#64](https://github.com/jstanden/cerb/issues/64)] [[#65](https://github.com/jstanden/cerb/issues/65)]

* **[Attachments/Upload]** Implemented a new file uploader using HTML5 and removing the legacy IFRAME approach.

* **[Attachments/Upload]** When uploading multiple files at once, each file can now use the maximum file size configured on the server. Previously, the upload limit was shared between all files being uploaded.

* **[Attachments/Uploads]** When uploading files, progress bars now display the current progress for each transfer.

* **[Bots/Scheduled Behaviors]** Scheduled behavior records now have cards, profile pages, and worklists. They are accessible from the global search menu. Scheduled behaviors can be created and modified from the records API via REST and bots. [[#634](https://github.com/jstanden/cerb/issues/634)]

* **[Cards/Search]** On cards for every record type, custom search buttons can now be configured by administrators. These will be added to cards for every worker. To build a custom search button, all you need to provide is a record type, singular label, plural label, and search query for the count. Placeholders for the current record in the card can be used to construct the query; and the count can be based on any field on any linked record. This is particularly useful to relate custom records to each other (e.g. Instructor->Courses). Search buttons can be dragged into the desired order. All of the built-in buttons (like Ticket->Participants, and Group->Members) have been moved to the editable search buttons, so they can be copied, changed, or removed.

* **[Profiles/Records/Search]** Any search buttons that are configured on record cards are now displayed on profiles as well.

* **[Platform/HTML]** Optimized HTML sanitization when used in a loop (e.g. project boards).

* **[Records/Behaviors]** Behavior worklists now default to sorting by the most recently updated records.

* **[Setup/Records]** In Setup, there's a new 'Records' menu for record-related configuration (cards, custom fields, avatars, etc). These options used to be buried in the 'Configure' menu.

* **[Platform/Dependencies]** Added the D3.js Javascript library for client-side visualizations on dashboards.

* **[Platform/Dependencies]** Added the TopoJSON Javascript library for efficient map-based visualizations on dashboards.

* **[Platform/Developers]** Added `Devblocks.loadScript(url,callback)` and `Devblocks.loadScripts(urls,callback)` helpers to the Javascript library. This allows plugins and widgets to lazy load third-party scripts. Scripts are loaded in parallel, browser cache is utilized, and multiple requests for the same script will only fetch it once.

* **[Profiles/Tabs]** Custom tabs can now be added to the profile page of any record type (without plugins). Admins can add new tabs from **Search >> Profile Tabs** and **Setup >> Records >> Configure**. The content of these tabs can adapt to the record being displayed. For instance, a dashboard can show charts and maps that update for each organization.

* **[Profiles/Dashboards]** Added dashboards as a type of custom profile tab. Dashboards are a collection of widgets that have access to all of the current record's placeholders so that they can adapt based on the profile being viewed. Widgets load from the server asynchronously and in parallel. They can be dragged into a preferred order. [#655](https://github.com/jstanden/cerb/issues/655)]

* **[Profiles/Dashboards]** Profile dashboards follow responsive design principles. Dashboards are configured with a preferred column width and widgets are automatically rearranged based on a device's screen width. A narrow width will result in a single column, while a wide dedicated screen could display many more. Widgets grow and shrink according to the space available. Widgets are wrapped horizontally so the most frequently viewed widgets always occur near the top of the page, regardless of the number of columns.

* **[Profiles/Dashboards]** Widgets on profile dashboards can be configured to span multiple column widths. For instance, a large chart or worklist can be 2-4X wider than the widgets around it.

* **[Profiles/Dashboards/Widgets]** Added 'Worklist' widgets to profile dashboards. Unlike worklists on workspace dashboards, these offer full worklist functionality. This allows worklists and other visualizations to be mixed on the same dashboard. Worklist widgets have a simplified configuration: record type, required query, default query, records per page, color, and columns. Worker-level changes (filtering, sorting, paging) are persisted per-record for the duration of the session.

* **[Profiles/Dashboards/Widgets]** Added 'Custom' widgets to profile dashboards. The content of a custom widget is generated using a 'Dashboard render widget' bot behavior. This allows data to be imported from anywhere, in nearly any format, and visualized however you want. We have many reference examples using D3.js (e.g. line/bar/area charts, pie/donut charts, network graphs, word clouds, maps) that can be quickly adapted to your needs. This gives you full control over every aspect of the visualization: colors, axes, labels, etc. [#87](https://github.com/jstanden/cerb/issues/87)]

* **[Developers/Plugins]** Removed profile tab extensions from plugins (`Extension_ContextProfileTab`) in favor of the new profile tab records (built through the UI).

* **[Profiles]** Removed the built-in 'Mail History' tabs on profiles since they can be reimplemented using profile custom tabs using worklist widgets.

* **[Profiles]** Removed the built-in 'Calendar' and 'Availability' tabs on worker profiles since they can be reimplemented using profile custom tabs and calendar widgets.

* **[Profiles]** Removed the built-in 'Responsibilities' tabs on group and worker profiles since they can be reimplemented using profile custom tabs and responsibility widgets.

* **[Bots/Interactions/UX]** Added a loading animation to the floating bot interactions menu in the bottom right.

* **[Profiles/Widgets/Fields]** Added a 'Fields' widget to profile dashboards. This displays built-in fields, custom fields, and search buttons for any record. The displayed record can be specified using placeholders. For instance, on a ticket profile, the fields of the ticket and its organization can be displayed at the same time. This widget replaces the properties area at the top of profiles, moving the tabs right to the top without requiring scrolling.

* **[Profiles/Widgets/Calendars]** Added a 'Calendar' widget to profile dashboards.

* **[Profiles/Widgets/Calendars]** Added a 'Calendar Availability' widget to profile dashboards.

* **[Profiles/Widgets/Ticket/Spam]** Added a 'Ticket Spam Analysis' widget to profile dashboards on ticket records. This replaces the 'Spam Analysis' plugin.

* **[Profiles/Widgets/Projects]** Added a 'Project Board' widget to profile dashboards. This displays any project board and is configurable with placeholders.

* **[Profiles/Widgets/Bots]** Added a 'Behavior Tree' widget to project dashboards. This can display the editable decision tree for any bot behavior. It's configurable using placeholders.

* **[Profiles/Widgets/Knowledgebase]** Added a 'Knowledgebase Article' widget to profile dashboards. This displays any article and is configurable using placeholders.

* **[Profiles/Widgets/Responsibilities]** Added a 'Responsibilities' widget to profile dashboards on worker and group records. This replaces the built-in tab.

* **[Records/Search/Cleanup]** On worklists, removed the 'Filter:' menu along with the old style of adding individual filters. Quick search queries handle everything now in a far more flexible and expressive way (booleans, groups, deep search, sets, negation, etc).

* **[Tickets/Cleanup]** Removed the legacy 'Print' feature from tickets and messages. This is well-handled by browsers and CSS now.

* **[Tickets/Cleanup]** Removed the legacy 'Include activity log entries in the timeline' worker preference. This can now be done more cleanly using profile dashboards by adding an activity log worklist.

* **[Records/Worklists/Cleanup]** Removed the legacy 'filter presets' feature. This had been deprecated by 'saved searches' in 8.x, which use queries rather than legacy filters.

* **[Bots/Scripting]** Added a `|cerb_translate` filter to bot scripting. This converts string IDs (like `status.open`) into text in the current worker's language.

* **[Bots/Scripting]** Added a `cerb_has_priv(priv, actor_context, actor_id)` function to bot scripting. This returns a boolean depending on whether the given actor has the given privilege among their roles. If no actor is given, the current worker is assumed. This allows bot functionality, snippets, and widgets, to adapt based on worker permissions. This is particularly useful in HTML-based profile widgets.

* **[Bots/Scripting]** Added `cerb_record_readable(record_context, record_id, actor_context, actor_id)` and `cerb_record_writeable(record_context, record_id, actor_context, actor_id)` functions to bot scripting. These return a boolean if the given actor has read or write access to the given record. If no actor is provided then the current worker is assumed. This allows bots and widgets to adapt based on record permissions. For instance, an HTML widget on a profile dashboard could only show a button to workers who can modify the record.

* **[Worklists/Search/Subtotals]** When searching worklists with queries, a `subtotal:` filter can be provided to also return subtotals on the given field. This is particularly helpful when configuring worklist widgets.

* **[Worklists/Search/UX]** On all worklists, the previously used search query is now remembered even when the list if closed and returned to later. This makes it much easier to modify the existing filters. Previously, the search query field was blank upon return and the query had to be tediously reconstructed.

* **[Profiles/Widgets/Tickets]** Added a 'Ticket Conversation' widget to profile dashboards. This displays the the ticket timeline with messages and comments, allows replying, etc. As a widget, this can be moved around to a desired location on the ticket profile page.

* **[Profiles/Dashboards]** When creating profile dashboard tabs, a layout can now be selected for positioning the widgets. Layouts are composed of zones. For instance, a 'sidebar' and 'main content' area as two zones. Zones are named, so that switching between compatible zones (e.g. left-sidebar, right-sidebar) keeps the widgets in their proper place as the entire zone moves. When widgets aren't assigned to an existing zone after the layout changes, they are added to the first zone. When dragging widgets, the zones are highlighted. This is particularly useful when you want to have one large widget (like a ticket conversation) with a sidebar containing several widgets. This wasn't possible with the previous 'grid' design.

* **[Profiles/Widgets]** Added a 'Comments' widget to profile dashboards. This displays the comment discussion thread for a given record. This is intended to replace the previous 'Comments' tab from hardcoded profiles.

* **[Profiles/Widgets/Fields]** On the 'Records Fields' profile widget, the fields and fieldsets to display can now be configured. Fields can be dragged into a desired order. This drastically cleans up profiles by only displaying fields that are important, and hiding everything else.

* **[Profiles/Widgets/Fields]** On the 'Record Fields' profile widget, a 'Show record links' option is available. This determines whether or not to show the 'Links' section for adding links and showing a search button for each type of linked record.

* **[Profiles/Widgets/Fields]** On the 'Record Fields' profile widget, added a new 'Show empty fields' option in configuration. This determines whether blank fields will be included in the output. This is disabled by default (i.e. fields with no value are hidden).

* **[Profiles/Widgets/Fields]** On the 'Record Fields' profile widget, custom search counter buttons can now be configured for each instance of the widget. These buttons run a search query using placeholders from the target record and return the number of results. For instance, a different set of search counters could be displayed on an organization fields widget on tickets and on contacts. For tickets, counts of the organization's ticket history and contacts could be shown.

* **[Profiles/Widgets]** Added an 'HTML/Javascript' widget to profile dashboards. This allows admins to render arbitrary content to the screen using bot scripting and the placeholders of the current record. For instance, data from a (hidden) fieldset can be displayed as a visualization.

* **[Profiles/Widgets/Keyboard/Usability]** On profile dashboards, unhandled keyboard shortcuts are sent to widgets in order to give them an opportunity to respond. For instance, this allows an 'Actions' widget on ticket profiles to handle the close/spam/delete shortcuts, while also making them configurable and extensible.

* **[Records/Search]** Added a `fieldset:` filter to search queries on all records. This allows deep searching against any linked custom fieldsets.

* **[Records/Custom Fieldsets/Performance/Links]** The custom fieldsets feature no longer uses record links to associate fieldsets to records. This is now handled with a dedicated table which improves performance and simplifies maintenance.

* **[Records/Custom Fieldsets]** Fixed an issue where moving a custom field between fieldsets didn't link existing records with that field with the new fieldset.

* **[Worklists/Search]** In the search menu for all worklists, added a `sort:` submenu to display the available sort fields. This also allows adding sorts in ascending or descending order.

* **[Worklists/Search]** In the search menu for all worklists, added a `subtotal:` submenu to display which fields the records can be subtotaled on from a query.

* **[Worklists/UX]** Worker custom fields on worklists now open a card popup rather than redirecting to the profile page.

* **[Profiles]** When viewing a profile, appending a tab name to the URL (in permalink format) will automatically select that tab. This gives custom tabs the same functionality as the previously built-in tabs. For instance `/log` for 'Log' or `/my_new_mail` for 'My New Mail'.

* **[Profiles/Tickets/Drafts]** On ticket profiles, drafts now have a 'Permalink' button for generating a sharing link back to the draft. This works like the links for messages and comments, where the draft is scrolled into view and highlighted with a brief animation.

* **[Profiles/Comments]** On profiles, every record type that supports comments now has a 'Comment' button at the top of the page. When a comment is created, an event is sent to all profile widgets so they can refresh their content.

